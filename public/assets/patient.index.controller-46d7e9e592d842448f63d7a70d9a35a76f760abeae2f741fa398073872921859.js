"use strict";!function(){function t(t,i,e,a,n,c,s){var o=this;o.patients=t.query(),o.active=0,o.activeLabs={cbcs:null,ptptts:null,bmps:null},o.activeLatestVisit=null,o.setActivePatient=function(t){o.activePatient=t,o.visits=i.query({patient_id:o.activePatient.id}).$promise.then(function(t){t.length>0?(o.activeLabs.cbcs=e.query({patient_id:o.activePatient.id,visit_id:t[0].id}).$promise.then(function(t){o.activeLabs.cbc=t[0]}),o.activeLabs.ptptts=a.query({patient_id:o.activePatient.id,visit_id:t[0].id}).$promise.then(function(t){o.activeLabs.ptptt=t[0]}),o.activeLabs.bmps=n.query({patient_id:o.activePatient.id,visit_id:t[0].id}).$promise.then(function(t){o.activeLabs.bmp=t[0]}),o.activeLatestVisit=t[0]):o.activeLatestVisit=null})},o.init=function(){t.query().$promise.then(function(t){o.setActivePatient(t[0])})},o.deleteActive=function(){o.activePatient.$delete({id:o.activePatient.id}),s.go("Home",{},{reload:!0})},o.apiCall=function(t){o.apiTest=c.get({query:t})}}angular.module("handOff").controller("PatientIndexController",["PatientFactory","VisitFactory","CbcFactory","PtpttFactory","BmpFactory","ApiFactory","$state","$resource",t])}();